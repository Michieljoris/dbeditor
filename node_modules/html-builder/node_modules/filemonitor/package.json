{
  "name": "filemonitor",
  "description": "Monitor filesystem events in node.js. Watch for file changes and run callbacks.",
  "version": "0.1.3",
  "homepage": "http://github.com/krlito/filemonitor-node.git",
  "author": {
    "name": "Carlos Campo",
    "email": "carlos@campo.com.co"
  },
  "repository": {
    "type": "git",
    "url": "http://github.com/krlito/filemonitor-node.git"
  },
  "directories": {
    "lib": "./lib"
  },
  "readme": "#filemonitor-node\n\nThis node module is a thin wrapper around the [inotifywait][] command. It can be used to monitor and act upon file system events. \nFilemonitor-node can be used to monitor events on files or directories. When a directory is monitored, events are returned\nfor the directory itself and its files.\n\n\n##Requirements\n\nFilemonitor-node depends on [inotify-tools]. To install inotify-tools on a Linux (Debian/Ubuntu) system:\n\n    sudo apt-get install inotify-tools\n\nFor installing on other linux flavors, go [here][getting-inotify-tools].\n\n\n##Installation\n\nOn your project directory:\n\n    npm install filemonitor\n\n\n##Events\n\nThe following events are captured by the module:\n\n- **access**: A watched file or a file within a watched directory was read from.\n- **modify**: A watched file or a file within a watched directory was written to.\n- **attrib**: The metadata of a watched file or a file within a watched directory was modified. This includes timestamps, \n  file permissions, extended attributes etc.\n- **close_write**: A watched file or a file within a watched directory was closed, after being opened in writeable mode.\n  This does not necessarily imply the file was written to.\n- **close_nowrite**: A watched file or a file within a watched directory was closed, after being opened in read-only mode.\n- **close**: A watched file or a file within a watched directory was closed, regardless of how it was opened. Note that this \n  is actually implemented simply by listening for both close_write and close_nowrite, hence all close events received will \n  be output as one of these, not CLOSE.\n- **open**: A watched file or a file within a watched directory was opened.\n- **moved_to**: A file or directory was moved into a watched directory. This event occurs even if the file is simply moved \n  from and to the same directory.\n- **moved_from**: A file or directory was moved from a watched directory. This event occurs even if the file is simply moved \n  from and to the same directory.\n- **move**: A file or directory was moved from or to a watched directory. Note that this is actually implemented simply by \n  listening for both moved_to and moved_from, hence all close events received will be output as one or both of these, not MOVE.\n- **move_self**: A watched file or directory was moved. After this event, the file or directory is no longer being watched.\n- **create**: A file or directory was created within a watched directory.\n- **remove**: A file or directory within a watched directory was deleted.\n- **remove_self**: A watched file or directory was deleted. After this event the file or directory is no longer being watched.\n  Note that this event can occur even if it is not explicitly being listened for.\n- **unmount**: The filesystem on which a watched file or directory resides was unmounted. After this event the file or directory \n  is no longer being watched. Note that this event can occur even if it is not explicitly being listened to.\n\n\n##Usage\n\nTo monitor a file is as easy as:\n\n```javascript\n    var filemon = require('filemonitor');\n    \n    var onFileEvent = function (ev) {\n      var filetype = ev.isDir ? \"directory\" : \"file\";\n      console.log(\"Event \" + ev.eventId + \" was captured for \" + filetype + \" \" + ev.filename + \" on time: \" + ev.timestamp.toString());\n    }\n\n    var options = {\n      target: \"./docs/myfile.txt\",\n      listeners: {\n        all_events: onFileEvent\n      }\n    }\n    \n    filemon.watch(options);\n```\n\nIn the previous example, the module was instantiated. Then, an options object is set including a target file and a callback function in case an event is captured.\nFinally, `filemon.watch(options)` is called to start monitoring.\n\n\n###Event Object\nEach time an event is captured, its callback is called passing an event object as argument. This object has the following properties:\n- **filename** is a string with the relative path to the watched file/directory.\n- **eventId** is a string whose value is one of the events names described in *Events* section.\n- **isDir** is `true` if what is being watched is a directory. Otherwise, `false`.\n- **timestamp** is a Date object. It has the datetime at which the event was captured.\n\n\n###Options\nThe options to configure filemonitor-node include:\n- **target** is an array of strings containing files/directories to be watched. (default: current directory `[\".\"]`).\n- **recursive** is a boolean. When `true`, nested files in the subdirectories of the *target* directories will be also watched (recursively).\n  Normally, these nested files are excluded from any monitoring.  (default: `false`).\n- **exclude** is an array of string containg files/directories to be excluded from watching. This is very useful when watching\n  directories. (default: empty array `[]`).\n- **dismissQueuedEvents** is `true` for dismissing events that are already pending. If a previously captured event has not been. (default: `true`).\n- **listeners** is an object for mapping events to callbacks. Listener's keys can be any of the event names described in section *Events*. \n  Each of these keys must have assigned a callback as a value.  The special key `all_events` matches a callback to all event. (default: empty object `{}`).\n\n\n###More examples\n\nFor monitoring a complete directory waiting for newly created files:\n\n```javascript\n    var filemon = require('filemonitor');\n    \n    var onFileEvent = function (ev) {\n      console.log(\"File \" + ev.filename + \" triggered event \" + ev.eventId + \" on \" + ev.timestamp.toString());\n    }\n\n    var onFileCreation = function (ev) {\n      console.log(\"File \" + ev.filename + \" was created on \" + ev.timestamp.toString());\n    }\n\n    var options = {\n      recursive: false,\n      target: \"./docs/\",\n      listeners: {\n        all_events: onFileEvent,\n        create: onFileCreation\n      }\n    }\n    \n    filemon.watch(options);\n```\n\n\nAnother example for watching multiple files and excluding some others:\n \n```javascript\n    var filemon = require('filemonitor');\n    \n    var onFileChange = function (ev) {\n      //... Do Something\n    }\n\n    var onFileCreation = function (ev) {\n      //... Do Something\n    }\n\n    var options = {\n      recursive: false,\n      target: [\"./docs/\", \"./config/app.config\"],\n      exclude: [\"./docs/myfile1.txt\", \"./docs/myfile10.txt\"],\n      listeners: {\n        modify: onFileChange,\n        create: onFileCreation\n      }\n    }\n    \n    filemon.watch(options);\n```\n\n###Other comments...\n- Once the `watch` function has been called, options cannot be changed.\n- Monitoring can be stopped calling function `filemon.stop()`.\n- For monitoring a single file, it should be easier to use `watch` \n  in the standard file system node.js API.\n\n[inotifywait]: http://github.com/rvoicilas/inotify-tools/wiki\n[inotify-tools]: http://github.com/rvoicilas/inotify-tools/wiki\n[getting-inotify-tools]: http://github.com/rvoicilas/inotify-tools/wiki/#wiki-getting\n\n",
  "readmeFilename": "README.md",
  "bugs": {
    "url": "https://github.com/krlito/filemonitor-node/issues"
  },
  "_id": "filemonitor@0.1.3",
  "_from": "filemonitor@0.1.x"
}
